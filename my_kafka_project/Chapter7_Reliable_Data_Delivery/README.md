## 7장 신뢰성 있는 데이터 전달

### 신뢰성 보장

대게 가장 잘 알려진 신뢰성 보장은 관계형 데이터베이스에서 보편적으로 지원하는 ACID이다. 이는 <span style='color:#8854d0'>원자성(atomicity), 일관성(consistency), 격리성(isolation) ,지속성(durability)</span>을 의미하며 어떤 데이터베이스가 ACID를 준수한다고 하면, 이는 트랜잭션 처리 관련하여 어떤 행동을 보장함을 의미한다.

이러한 보장이 있기 때문에 가장 중요한 애플리케이션이 관계형 데이터베이스를 믿고 사용할 수 있다. 그렇다면 아파치 카프카는 어떤 것을 보장해줄까?
- 카프카는 파티션 안의 메시지들 간의 순서를 보장한다. 만약 메시지 A 다음에 메시지 B가 쓰여졌다면, 동일한 프로듀서가 동일한 파티션에 썼을 경우, 카프카는 B의 오프셋이 A보다 큰 것을 보장합니다. 컨슈머 역시 A를 읽어온 다음 B를 읽는다.
- 클라이언트가 쓴 메시지는 <span style='color:#f7b731'>모든 인-싱크 레플리카의 파티션에 쓰여진 뒤에야 '커밋'된 것으로 간주</span>된다. 프로듀서는 메시지가 완전히 커밋된 다음 응답이 올지, 리더에게 쓰여진 다음 응답이 올지 아니면 네트워크로 전송된 다음 응답이 올지 를 선택할 수 있다.
- 커밋된 메시지들은 <span style='color:#f7b731'>최소 1개의 작동 가능한 레플리카가 남아 있는 한 유실되지 않는다.</span>
- <span style='color:#f7b731'>컨슈머는 커밋된 메시지만</span> 읽을 수 있다.

> 이러한 기본적인 보장들은 신뢰성 있는 시스템 구축을위해 사용되어질 수 있지만 그 자체로는 시스템 전체를 완전히 신뢰성 있게 만들어 주지는 못한다. 
> 따라서, 개발자나 운영자는 가용성, 높은 처리량, 낮은 지연, 하드웨어 비용, 신뢰성 등 다양한 고려사항에 맞추어 설정 매개변수를 조절함으로써 카프카를 활용해야한다.
